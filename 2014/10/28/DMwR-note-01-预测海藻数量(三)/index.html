
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>DMwR-note-01-预测海藻数量(三) | Tim Chan&#39;s Blog!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Tim Chan">
    
    <meta name="description" content="写在开头的话

讨论了缺失值的处理，相当于对数据进行了简单的预处理，今天我们来继续探讨数据集模型的建立。
数据的模型


数据的模型简单的说就是一个函数，输入就是我们之前的数据algae，而输出就是我们预期的一些值。
本案例的主要研究目的是预测140个水样中7种海藻的出现频率。假设海藻频率是数值型数">
    
    
    
    
    <link rel="alternative" href="/atom.xml" title="Tim Chan&#39;s Blog!" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Tim Chan&#39;s Blog!" title="Tim Chan&#39;s Blog!"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Tim Chan&#39;s Blog!">Tim Chan&#39;s Blog!</a></h1>
				<h2 class="blog-motto">记录生活点滴！</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于我</a></li>
					
						<li><a href="https://pomotodo.com/app/">ToDo</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:tim4chan.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/10/28/DMwR-note-01-预测海藻数量(三)/" title="DMwR-note-01-预测海藻数量(三)" itemprop="url">DMwR-note-01-预测海藻数量(三)</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://tim4chan.com/about" title="Tim Chan" target="_blank" itemprop="author">Tim Chan</a>
		
  <p class="article-time">
    <time datetime="2014-10-27T23:39:16.000Z" itemprop="datePublished"> Published Oct 28 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#写在开头的话"><span class="toc-number">1.</span> <span class="toc-text">写在开头的话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据的模型"><span class="toc-number">2.</span> <span class="toc-text">数据的模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多元化线性回归"><span class="toc-number">2.1.</span> <span class="toc-text">多元化线性回归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#回归树"><span class="toc-number">2.2.</span> <span class="toc-text">回归树</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#后记"><span class="toc-number">3.</span> <span class="toc-text">后记</span></a></li></ol>
		
		</div>
		
		<h2 id="写在开头的话">写在开头的话</h2>
<hr>
<p>讨论了缺失值的处理，相当于对数据进行了简单的预处理，今天我们来继续探讨数据集模型的建立。</p>
<h2 id="数据的模型">数据的模型</h2>
<hr>
<ul>
<li>数据的模型简单的说就是一个函数，输入就是我们之前的数据algae，而输出就是我们预期的一些值。</li>
<li>本案例的主要研究目的是预测140个水样中7种海藻的出现频率。假设海藻频率是数值型数据，因此可以考虑进行回归分析。简单地说，预测任务是建立一个模型来找到一个数值变量和一组解释变量的关系。这个模型既可以根据未来解释变量的值来预测目标变量，也可以帮助更好地理解问题中各个变量之间的相互联系。<h3 id="多元化线性回归">多元化线性回归</h3>
</li>
</ul>
<hr>
<ul>
<li>多元线性回归模型是最常用的统计数据分析方法，该模型给出了一个有关目标变量与一组解释变量关系的线性函数。</li>
<li>数据缺失值的处理：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">library(DMwR)</div><div class="line">data(algae)</div><div class="line">temp &lt;- algae</div><div class="line">temp &lt;- temp[-manyNAs(temp),]</div><div class="line">clean.algae &lt;- knnImputation(temp, k = <span class="number">10</span>)</div></pre></td></tr></table></figure>

<ul>
<li>上面的代码首先移除了第62条和第199条水样记录，因为在这两条记录的11个预测变量中有6个是有缺失值的。然后利用数据集个案的相似性来填补缺失值。以上代码运行之后，得到的数据框将不含缺失值。</li>
<li>接下来，将建立一个用于预测海藻频率的线性回归模型：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">summary(lm.a1)</div></pre></td></tr></table></figure>

<ul>
<li>函数lm()建立一个线性回归模型，其中的第一个参数给出了模型的函数形式。在这个例子中，函数的形式是用数据中其他所有变量来预测变量a1，第一个参数中的点”.”代表数据框中除了a1之外的变量。如果需要用预测变量mxPH和NH4来预测变量a1，就要定义模型为“a1~mxPH + NH4”。还有很多其他定义模型的方式，这都称为R公式，后边用到时进行介绍。参数data是用来设定建模所用的数据集。</li>
<li>函数lm()的结果是一个含有线性模型信息的对象。可以通过下列代码获取更多线性模型的信息：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">lm.a1 &lt;- lm(a1~., data = clean.algae[,<span class="number">1</span>:<span class="number">12</span>])</div><div class="line"></div><div class="line">Call:</div><div class="line">lm(formula = a1 ~ ., data = clean.algae[, <span class="number">1</span>:<span class="number">12</span>])</div><div class="line"></div><div class="line">Residuals:</div><div class="line">    M<span class="keyword">in</span>      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </div><div class="line">-<span class="number">37.679</span> -<span class="number">11.893</span>  -<span class="number">2.567</span>   <span class="number">7.410</span>  <span class="number">62.190</span> </div><div class="line"></div><div class="line">Coefficients:</div><div class="line">              Estimate Std. Error t value Pr(&gt;|t|)   </div><div class="line">(Intercept)  <span class="number">42.942055</span>  <span class="number">24.010879</span>   <span class="number">1.788</span>  <span class="number">0.07537</span> . </div><div class="line">seasonspring  <span class="number">3.726978</span>   <span class="number">4.137741</span>   <span class="number">0.901</span>  <span class="number">0.36892</span>   </div><div class="line">seasonsummer  <span class="number">0.747597</span>   <span class="number">4.020711</span>   <span class="number">0.186</span>  <span class="number">0.85270</span>   </div><div class="line">seasonwinter  <span class="number">3.692955</span>   <span class="number">3.865391</span>   <span class="number">0.955</span>  <span class="number">0.34065</span>   </div><div class="line">sizemedium    <span class="number">3.263728</span>   <span class="number">3.802051</span>   <span class="number">0.858</span>  <span class="number">0.39179</span>   </div><div class="line">sizesmall     <span class="number">9.682140</span>   <span class="number">4.179971</span>   <span class="number">2.316</span>  <span class="number">0.02166</span> * </div><div class="line">speedlow      <span class="number">3.922084</span>   <span class="number">4.706315</span>   <span class="number">0.833</span>  <span class="number">0.40573</span>   </div><div class="line">speedmedium   <span class="number">0.246764</span>   <span class="number">3.241874</span>   <span class="number">0.076</span>  <span class="number">0.93941</span>   </div><div class="line">mxPH         -<span class="number">3.589118</span>   <span class="number">2.703528</span>  -<span class="number">1.328</span>  <span class="number">0.18598</span>   </div><div class="line">mnO2          <span class="number">1.052636</span>   <span class="number">0.705018</span>   <span class="number">1.493</span>  <span class="number">0.13715</span>   </div><div class="line">Cl           -<span class="number">0.040172</span>   <span class="number">0.033661</span>  -<span class="number">1.193</span>  <span class="number">0.23426</span>   </div><div class="line">NO3          -<span class="number">1.511235</span>   <span class="number">0.551339</span>  -<span class="number">2.741</span>  <span class="number">0.00674</span> **</div><div class="line">NH4           <span class="number">0.001634</span>   <span class="number">0.001003</span>   <span class="number">1.628</span>  <span class="number">0.10516</span>   </div><div class="line">oPO4         -<span class="number">0.005435</span>   <span class="number">0.039884</span>  -<span class="number">0.136</span>  <span class="number">0.89177</span>   </div><div class="line">PO4          -<span class="number">0.052241</span>   <span class="number">0.030755</span>  -<span class="number">1.699</span>  <span class="number">0.09109</span> . </div><div class="line">Chla         -<span class="number">0.088022</span>   <span class="number">0.079998</span>  -<span class="number">1.100</span>  <span class="number">0.27265</span>   </div><div class="line">---</div><div class="line">Signif. codes:  <span class="number">0</span> ?**?<span class="number">0.001</span> ?*?<span class="number">0.01</span> ??<span class="number">0.05</span> ??<span class="number">0.1</span> ??<span class="number">1</span></div><div class="line"></div><div class="line">Residual standard error: <span class="number">17.65</span> on <span class="number">182</span> degrees of freedom</div><div class="line">Multiple R-squared:  <span class="number">0.3731</span>,	Adjusted R-squared:  <span class="number">0.3215</span> </div><div class="line">F-statistic: <span class="number">7.223</span> on <span class="number">15</span> and <span class="number">182</span> DF,  p-value: <span class="number">2.444</span>e-<span class="number">12</span></div></pre></td></tr></table></figure>

<ul>
<li>在解释函数summary()应用到线性模型对象所得到的信息之前，先介绍R如何处理3个名义变量。当像上面一样进行模型构建时，R会生成一组的辅助变量，即对每一个有k个水平的因子变量，R会生成k-1个辅助变量。这些辅助变量的值为0或者1.当辅助变量的值为1，表明该因子出现，同时表明其他所有辅助变量的值为0。如果所有的k-1个变量的值都是0，则表明因子变量的取值为第k个剩余的值。在以上的汇总结果中，可以看到R为因子变量season生成了3个辅助变量(seasonspring, seasonsummer和seasonwinter)。如果某个水样的season变量的取值为”autumn”，则所有3个赋值变量的值将全部为零。</li>
<li>对得到的线性模型对象应用函数summary()，将给出所建立模型的一些诊断信息。首先是有关线性模型中数据拟合的残差(residual)。残差应该是均值为0并且为正态分布。（显然残差最好尽可能的小！）</li>
<li>对于每个多元线性回归方程的系数(变量)，R显示它的估计值和标准误差(这些系数变化程度的估计)。为了检验这些系数的重要性，可以进行这些系数为0的假设检验，即<img src="/img/DMwR/02_algae_model/01_formula.PNG" alt="">。通常使用t检验来验证这些假设。R计算t值，该值定义为估计系数值与其标准误差的比，即<img src="/img/DMwR/02_algae_model/02_formula.PNG" alt="">。R将显示与系数相关联的一列(Pr(&gt; |t|))表示系数为0这一假设被拒绝的概率。因此，该值为0.0001表明有99.99%的置信度认为这个系数并非为0。对于每个测试，R都给出一个标志来表示相应的测试置信度水平。总之，仅对于这些前面有标志的系数，我们至少有90%的置信度来拒绝系数为0的一个假设。</li>
<li>另一个由R输出的模型诊断信息是R^2(或者多元R^2或调整R^2)。R^2表明模型与数据的吻合度，即数据所能解释的数据变差的比例。R^2越接近1(几乎100%地解释模型数据的变差)就说模型模拟得很好；R^2越小，说明模型拟合得越差。调整系数则更严格，它考虑回归模型中参数的数量。</li>
<li>最后，我们还可以检验任何解释变量和目标变量没有哦依赖这一原假设，即<img src="/img/DMwR/02_algae_model/03_formula.PNG" alt="">。可以通过把R给出的F统计值与一个临界值进行比较来进行检验。R提供一个拒绝原假设的置信度水平。因此p值为0.0001表示99.99%的置信度确定原假设是错误的。通常，如果一个模型不能通过这个检验(即得到的p值被认为太大，例如大于0.1)，则单个系数的t检验没有意义。</li>
<li>有些诊断信息也可以通过绘制线性模型来进行检验。实际上，可以用一个类似plot(lm.al)的命令得到一系列的线性模型图，它们有助于了解模型的性能。其中的一个图形绘制拟合的目标变量值和模型残差的散点图。误差相对较大时，R通常在该散点图中添加相应的行数，这样就可以方便地检查这些误差较大的记录。R给出的另一个图形是误差的正态Q-Q图，通过它可以检查误差是否符合应有的正态分布。</li>
<li>该模型解释的方差比例还不是很理想(大约32%)。还可以拒绝目标变量不依赖于预测变量的假设(F检验的p值很小)。检查某些系数的显著性，可能会质疑有些变量是否应该进入模型中。有多种方法可以用来精简回归模型。本节将介绍<strong>向后消元法</strong>。</li>
<li>首先用函数anova()来精简线性模型。当将anova()应用到简单线性模型时，这个函数提供一个模型拟合的方差序贯分析。也就是说，随着公式中项数的增加，模型的残差平方和减少。对前面的模型进行方差分析，结果如下：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">anova(lm.a1)</div><div class="line"></div><div class="line">Analysis of Variance Table</div><div class="line"></div><div class="line">Response: a1</div><div class="line">           Df Sum Sq Mean Sq F value    Pr(&gt;F)    </div><div class="line">season      <span class="number">3</span>     <span class="number">85</span>    <span class="number">28.2</span>  <span class="number">0.0905</span> <span class="number">0.9651944</span>    </div><div class="line">size        <span class="number">2</span>  <span class="number">11401</span>  <span class="number">5700.7</span> <span class="number">18.3088</span>  <span class="number">5.69</span>e-<span class="number">08</span> ***</div><div class="line">speed       <span class="number">2</span>   <span class="number">3934</span>  <span class="number">1967.2</span>  <span class="number">6.3179</span> <span class="number">0.0022244</span> ** </div><div class="line">mxPH        <span class="number">1</span>   <span class="number">1329</span>  <span class="number">1328.8</span>  <span class="number">4.2677</span> <span class="number">0.0402613</span> *  </div><div class="line">mnO2        <span class="number">1</span>   <span class="number">2287</span>  <span class="number">2286.8</span>  <span class="number">7.3444</span> <span class="number">0.0073705</span> ** </div><div class="line">Cl          <span class="number">1</span>   <span class="number">4304</span>  <span class="number">4304.3</span> <span class="number">13.8239</span> <span class="number">0.0002671</span> ***</div><div class="line">NO3         <span class="number">1</span>   <span class="number">3418</span>  <span class="number">3418.5</span> <span class="number">10.9789</span> <span class="number">0.0011118</span> ** </div><div class="line">NH4         <span class="number">1</span>    <span class="number">404</span>   <span class="number">403.6</span>  <span class="number">1.2963</span> <span class="number">0.2563847</span>    </div><div class="line">oPO4        <span class="number">1</span>   <span class="number">4788</span>  <span class="number">4788.0</span> <span class="number">15.3774</span> <span class="number">0.0001246</span> ***</div><div class="line">PO4         <span class="number">1</span>   <span class="number">1406</span>  <span class="number">1405.6</span>  <span class="number">4.5142</span> <span class="number">0.0349635</span> *  </div><div class="line">Chla        <span class="number">1</span>    <span class="number">377</span>   <span class="number">377.0</span>  <span class="number">1.2107</span> <span class="number">0.2726544</span>    </div><div class="line">Residuals <span class="number">182</span>  <span class="number">56668</span>   <span class="number">311.4</span>                      </div><div class="line">---</div><div class="line">Signif. codes:  <span class="number">0</span> ?**?<span class="number">0.001</span> ?*?<span class="number">0.01</span> ??<span class="number">0.05</span> ??<span class="number">0.1</span> ??<span class="number">1</span></div></pre></td></tr></table></figure>

<ul>
<li>上面结果表明变量season对减少模型拟合误差的贡献度最小下面将它从模型中剔除：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lm2.a1 = update(lm.a1, .~.-season)</div></pre></td></tr></table></figure>

<ul>
<li>函数update()用于对已有的线性模型进行微小的调整。在上面的代码中，应用函数update()从模型lm.a1中移除变量season以得到一个新的模型。新的模型的汇总信息如下：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">summary(lm2.a1)</div><div class="line"></div><div class="line">Call:</div><div class="line">lm(formula = a1 ~ size + speed + mxPH + mnO2 + Cl + NO3 + NH4 + </div><div class="line">    oPO4 + PO4 + Chla, data = clean.algae[, <span class="number">1</span>:<span class="number">12</span>])</div><div class="line"></div><div class="line">Residuals:</div><div class="line">    M<span class="keyword">in</span>      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </div><div class="line">-<span class="number">36.460</span> -<span class="number">11.953</span>  -<span class="number">3.044</span>   <span class="number">7.444</span>  <span class="number">63.730</span> </div><div class="line"></div><div class="line">Coefficients:</div><div class="line">              Estimate Std. Error t value Pr(&gt;|t|)   </div><div class="line">(Intercept) <span class="number">44.9532874</span> <span class="number">23.2378377</span>   <span class="number">1.934</span>  <span class="number">0.05458</span> . </div><div class="line">sizemedium   <span class="number">3.3092102</span>  <span class="number">3.7825221</span>   <span class="number">0.875</span>  <span class="number">0.38278</span>   </div><div class="line">sizesmall   <span class="number">10.2730961</span>  <span class="number">4.1223163</span>   <span class="number">2.492</span>  <span class="number">0.01358</span> * </div><div class="line">speedlow     <span class="number">3.0546270</span>  <span class="number">4.6108069</span>   <span class="number">0.662</span>  <span class="number">0.50848</span>   </div><div class="line">speedmedium -<span class="number">0.2976867</span>  <span class="number">3.1818585</span>  -<span class="number">0.094</span>  <span class="number">0.92556</span>   </div><div class="line">mxPH        -<span class="number">3.2684281</span>  <span class="number">2.6576592</span>  -<span class="number">1.230</span>  <span class="number">0.22033</span>   </div><div class="line">mnO2         <span class="number">0.8011759</span>  <span class="number">0.6589644</span>   <span class="number">1.216</span>  <span class="number">0.22561</span>   </div><div class="line">Cl          -<span class="number">0.0381881</span>  <span class="number">0.0333791</span>  -<span class="number">1.144</span>  <span class="number">0.25407</span>   </div><div class="line">NO3         -<span class="number">1.5334300</span>  <span class="number">0.5476550</span>  -<span class="number">2.800</span>  <span class="number">0.00565</span> **</div><div class="line">NH4          <span class="number">0.0015777</span>  <span class="number">0.0009951</span>   <span class="number">1.586</span>  <span class="number">0.11456</span>   </div><div class="line">oPO4        -<span class="number">0.0062392</span>  <span class="number">0.0395086</span>  -<span class="number">0.158</span>  <span class="number">0.87469</span>   </div><div class="line">PO4         -<span class="number">0.0509543</span>  <span class="number">0.0305189</span>  -<span class="number">1.670</span>  <span class="number">0.09669</span> . </div><div class="line">Chla        -<span class="number">0.0841371</span>  <span class="number">0.0794459</span>  -<span class="number">1.059</span>  <span class="number">0.29096</span>   </div><div class="line">---</div><div class="line">Signif. codes:  <span class="number">0</span> ?**?<span class="number">0.001</span> ?*?<span class="number">0.01</span> ??<span class="number">0.05</span> ??<span class="number">0.1</span> ??<span class="number">1</span></div><div class="line"></div><div class="line">Residual standard error: <span class="number">17.57</span> on <span class="number">185</span> degrees of freedom</div><div class="line">Multiple R-squared:  <span class="number">0.3682</span>,	Adjusted R-squared:  <span class="number">0.3272</span> </div><div class="line">F-statistic: <span class="number">8.984</span> on <span class="number">12</span> and <span class="number">185</span> DF,  p-value: <span class="number">1.762</span>e-<span class="number">13</span></div></pre></td></tr></table></figure>

<ul>
<li>新模型的拟合指标R^2提高到了32.8%，仍然不是太理想。下面使用anova()函数对两个模型进行正式的比较，但这次使用两个模型作为参数：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">anova(lm.a1, lm2.a1)</div><div class="line"></div><div class="line">Analysis of Variance Table</div><div class="line"></div><div class="line">Model <span class="number">1</span>: a1 ~ season + size + speed + mxPH + mnO2 + Cl + NO3 + NH4 + oPO4 + </div><div class="line">    PO4 + Chla</div><div class="line">Model <span class="number">2</span>: a1 ~ size + speed + mxPH + mnO2 + Cl + NO3 + NH4 + oPO4 + PO4 + </div><div class="line">    Chla</div><div class="line">  Res.Df   RSS Df Sum of Sq      F Pr(&gt;F)</div><div class="line"><span class="number">1</span>    <span class="number">182</span> <span class="number">56668</span>                           </div><div class="line"><span class="number">2</span>    <span class="number">185</span> <span class="number">57116</span> -<span class="number">3</span>   -<span class="number">447.62</span> <span class="number">0.4792</span> <span class="number">0.6971</span></div></pre></td></tr></table></figure>

<ul>
<li><p>上面的函数通过F检验对两个模型进行方差分析，据此评估两个模型是否有显著不同。这种情况下，尽管误差平方和减少了(-448),但是比较结果说明两者的差距并不显著(显著性值0.6971说明两个模型不同的可能性有30%)。注意，新模型比较简单。为了检查能否移除更多的系数，我们再次讨论对lm2.a1模型使用anova()函数。不断重复这个过程知道没有可剔除的候选系数。为了简化向后消元过程，R有一个函数来执行上面所有过程。</p>
</li>
<li><p>下面的代码对初始模型(lm.a1)用向后消元方法得到一个新的线性模型。</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div></pre></td><td class="code"><pre><div class="line">final.lm = step(lm.a1)</div><div class="line"></div><div class="line">Start:  AIC=<span class="number">1152.03</span></div><div class="line">a1 ~ season + size + speed + mxPH + mnO2 + Cl + NO3 + NH4 + oPO4 + </div><div class="line">    PO4 + Chla</div><div class="line"></div><div class="line">         Df Sum of Sq   RSS    AIC</div><div class="line">- season  <span class="number">3</span>    <span class="number">447.62</span> <span class="number">57116</span> <span class="number">1147.6</span></div><div class="line">- speed   <span class="number">2</span>    <span class="number">269.60</span> <span class="number">56938</span> <span class="number">1149.0</span></div><div class="line">- oPO4    <span class="number">1</span>      <span class="number">5.78</span> <span class="number">56674</span> <span class="number">1150.0</span></div><div class="line">- Chla    <span class="number">1</span>    <span class="number">376.96</span> <span class="number">57045</span> <span class="number">1151.3</span></div><div class="line">- Cl      <span class="number">1</span>    <span class="number">443.46</span> <span class="number">57112</span> <span class="number">1151.6</span></div><div class="line">- mxPH    <span class="number">1</span>    <span class="number">548.76</span> <span class="number">57217</span> <span class="number">1151.9</span></div><div class="line">&lt;none&gt;                <span class="number">56668</span> <span class="number">1152.0</span></div><div class="line">- mnO2    <span class="number">1</span>    <span class="number">694.11</span> <span class="number">57363</span> <span class="number">1152.4</span></div><div class="line">- NH4     <span class="number">1</span>    <span class="number">825.67</span> <span class="number">57494</span> <span class="number">1152.9</span></div><div class="line">- PO4     <span class="number">1</span>    <span class="number">898.42</span> <span class="number">57567</span> <span class="number">1153.1</span></div><div class="line">- size    <span class="number">2</span>   <span class="number">1857.16</span> <span class="number">58526</span> <span class="number">1154.4</span></div><div class="line">- NO3     <span class="number">1</span>   <span class="number">2339.36</span> <span class="number">59008</span> <span class="number">1158.0</span></div><div class="line"></div><div class="line">Step:  AIC=<span class="number">1147.59</span></div><div class="line">a1 ~ size + speed + mxPH + mnO2 + Cl + NO3 + NH4 + oPO4 + PO4 + </div><div class="line">    Chla</div><div class="line"></div><div class="line">        Df Sum of Sq   RSS    AIC</div><div class="line">- speed  <span class="number">2</span>    <span class="number">210.64</span> <span class="number">57327</span> <span class="number">1144.3</span></div><div class="line">- oPO4   <span class="number">1</span>      <span class="number">7.70</span> <span class="number">57124</span> <span class="number">1145.6</span></div><div class="line">- Chla   <span class="number">1</span>    <span class="number">346.27</span> <span class="number">57462</span> <span class="number">1146.8</span></div><div class="line">- Cl     <span class="number">1</span>    <span class="number">404.10</span> <span class="number">57520</span> <span class="number">1147.0</span></div><div class="line">- mnO2   <span class="number">1</span>    <span class="number">456.37</span> <span class="number">57572</span> <span class="number">1147.2</span></div><div class="line">- mxPH   <span class="number">1</span>    <span class="number">466.95</span> <span class="number">57583</span> <span class="number">1147.2</span></div><div class="line">&lt;none&gt;               <span class="number">57116</span> <span class="number">1147.6</span></div><div class="line">- NH4    <span class="number">1</span>    <span class="number">776.11</span> <span class="number">57892</span> <span class="number">1148.3</span></div><div class="line">- PO4    <span class="number">1</span>    <span class="number">860.62</span> <span class="number">57977</span> <span class="number">1148.5</span></div><div class="line">- size   <span class="number">2</span>   <span class="number">2175.59</span> <span class="number">59292</span> <span class="number">1151.0</span></div><div class="line">- NO3    <span class="number">1</span>   <span class="number">2420.47</span> <span class="number">59537</span> <span class="number">1153.8</span></div><div class="line"></div><div class="line">Step:  AIC=<span class="number">1144.31</span></div><div class="line">a1 ~ size + mxPH + mnO2 + Cl + NO3 + NH4 + oPO4 + PO4 + Chla</div><div class="line"></div><div class="line">       Df Sum of Sq   RSS    AIC</div><div class="line">- oPO4  <span class="number">1</span>     <span class="number">16.29</span> <span class="number">57343</span> <span class="number">1142.4</span></div><div class="line">- Chla  <span class="number">1</span>    <span class="number">223.29</span> <span class="number">57550</span> <span class="number">1143.1</span></div><div class="line">- mnO2  <span class="number">1</span>    <span class="number">413.77</span> <span class="number">57740</span> <span class="number">1143.7</span></div><div class="line">- Cl    <span class="number">1</span>    <span class="number">472.70</span> <span class="number">57799</span> <span class="number">1143.9</span></div><div class="line">- mxPH  <span class="number">1</span>    <span class="number">483.56</span> <span class="number">57810</span> <span class="number">1144.0</span></div><div class="line">&lt;none&gt;              <span class="number">57327</span> <span class="number">1144.3</span></div><div class="line">- NH4   <span class="number">1</span>    <span class="number">720.19</span> <span class="number">58047</span> <span class="number">1144.8</span></div><div class="line">- PO4   <span class="number">1</span>    <span class="number">809.30</span> <span class="number">58136</span> <span class="number">1145.1</span></div><div class="line">- size  <span class="number">2</span>   <span class="number">2060.95</span> <span class="number">59388</span> <span class="number">1147.3</span></div><div class="line">- NO3   <span class="number">1</span>   <span class="number">2379.75</span> <span class="number">59706</span> <span class="number">1150.4</span></div><div class="line"></div><div class="line">Step:  AIC=<span class="number">1142.37</span></div><div class="line">a1 ~ size + mxPH + mnO2 + Cl + NO3 + NH4 + PO4 + Chla</div><div class="line"></div><div class="line">       Df Sum of Sq   RSS    AIC</div><div class="line">- Chla  <span class="number">1</span>     <span class="number">207.7</span> <span class="number">57551</span> <span class="number">1141.1</span></div><div class="line">- mnO2  <span class="number">1</span>     <span class="number">402.6</span> <span class="number">57746</span> <span class="number">1141.8</span></div><div class="line">- Cl    <span class="number">1</span>     <span class="number">470.7</span> <span class="number">57814</span> <span class="number">1142.0</span></div><div class="line">- mxPH  <span class="number">1</span>     <span class="number">519.7</span> <span class="number">57863</span> <span class="number">1142.2</span></div><div class="line">&lt;none&gt;              <span class="number">57343</span> <span class="number">1142.4</span></div><div class="line">- NH4   <span class="number">1</span>     <span class="number">704.4</span> <span class="number">58047</span> <span class="number">1142.8</span></div><div class="line">- size  <span class="number">2</span>    <span class="number">2050.3</span> <span class="number">59393</span> <span class="number">1145.3</span></div><div class="line">- NO3   <span class="number">1</span>    <span class="number">2370.4</span> <span class="number">59713</span> <span class="number">1148.4</span></div><div class="line">- PO4   <span class="number">1</span>    <span class="number">5818.4</span> <span class="number">63161</span> <span class="number">1159.5</span></div><div class="line"></div><div class="line">Step:  AIC=<span class="number">1141.09</span></div><div class="line">a1 ~ size + mxPH + mnO2 + Cl + NO3 + NH4 + PO4</div><div class="line"></div><div class="line">       Df Sum of Sq   RSS    AIC</div><div class="line">- mnO2  <span class="number">1</span>     <span class="number">435.3</span> <span class="number">57986</span> <span class="number">1140.6</span></div><div class="line">- Cl    <span class="number">1</span>     <span class="number">438.1</span> <span class="number">57989</span> <span class="number">1140.6</span></div><div class="line">&lt;none&gt;              <span class="number">57551</span> <span class="number">1141.1</span></div><div class="line">- NH4   <span class="number">1</span>     <span class="number">746.9</span> <span class="number">58298</span> <span class="number">1141.6</span></div><div class="line">- mxPH  <span class="number">1</span>     <span class="number">833.1</span> <span class="number">58384</span> <span class="number">1141.9</span></div><div class="line">- size  <span class="number">2</span>    <span class="number">2217.5</span> <span class="number">59768</span> <span class="number">1144.6</span></div><div class="line">- NO3   <span class="number">1</span>    <span class="number">2667.1</span> <span class="number">60218</span> <span class="number">1148.1</span></div><div class="line">- PO4   <span class="number">1</span>    <span class="number">6309.7</span> <span class="number">63860</span> <span class="number">1159.7</span></div><div class="line"></div><div class="line">Step:  AIC=<span class="number">1140.58</span></div><div class="line">a1 ~ size + mxPH + Cl + NO3 + NH4 + PO4</div><div class="line"></div><div class="line">       Df Sum of Sq   RSS    AIC</div><div class="line">- NH4   <span class="number">1</span>     <span class="number">531.0</span> <span class="number">58517</span> <span class="number">1140.4</span></div><div class="line">- Cl    <span class="number">1</span>     <span class="number">584.9</span> <span class="number">58571</span> <span class="number">1140.6</span></div><div class="line">&lt;none&gt;              <span class="number">57986</span> <span class="number">1140.6</span></div><div class="line">- mxPH  <span class="number">1</span>     <span class="number">819.1</span> <span class="number">58805</span> <span class="number">1141.4</span></div><div class="line">- size  <span class="number">2</span>    <span class="number">2478.2</span> <span class="number">60464</span> <span class="number">1144.9</span></div><div class="line">- NO3   <span class="number">1</span>    <span class="number">2251.4</span> <span class="number">60237</span> <span class="number">1146.1</span></div><div class="line">- PO4   <span class="number">1</span>    <span class="number">9097.9</span> <span class="number">67084</span> <span class="number">1167.4</span></div><div class="line"></div><div class="line">Step:  AIC=<span class="number">1140.38</span></div><div class="line">a1 ~ size + mxPH + Cl + NO3 + PO4</div><div class="line"></div><div class="line">       Df Sum of Sq   RSS    AIC</div><div class="line">&lt;none&gt;              <span class="number">58517</span> <span class="number">1140.4</span></div><div class="line">- mxPH  <span class="number">1</span>     <span class="number">784.1</span> <span class="number">59301</span> <span class="number">1141.0</span></div><div class="line">- Cl    <span class="number">1</span>     <span class="number">835.6</span> <span class="number">59353</span> <span class="number">1141.2</span></div><div class="line">- NO3   <span class="number">1</span>    <span class="number">1987.9</span> <span class="number">60505</span> <span class="number">1145.0</span></div><div class="line">- size  <span class="number">2</span>    <span class="number">2664.3</span> <span class="number">61181</span> <span class="number">1145.2</span></div><div class="line">- PO4   <span class="number">1</span>    <span class="number">8575.8</span> <span class="number">67093</span> <span class="number">1165.5</span></div></pre></td></tr></table></figure>

<ul>
<li><p>函数step()使用Akaike信息标准进行模型搜索。默认情况下，搜索使用向后消元方法，但通过设置参数direction，可以采用其他的方法(参考该函数的帮助文档以获取更多信息)。</p>
</li>
<li><p>可以通过下面的代码来获得最后模型的信息：</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">summary(final.lm)</div><div class="line"></div><div class="line">Call:</div><div class="line">lm(formula = a1 ~ size + mxPH + Cl + NO3 + PO4, data = clean.algae[, </div><div class="line">    <span class="number">1</span>:<span class="number">12</span>])</div><div class="line"></div><div class="line">Residuals:</div><div class="line">    M<span class="keyword">in</span>      <span class="number">1</span>Q  Median      <span class="number">3</span>Q     Max </div><div class="line">-<span class="number">28.874</span> -<span class="number">12.732</span>  -<span class="number">3.741</span>   <span class="number">8.424</span>  <span class="number">62.926</span> </div><div class="line"></div><div class="line">Coefficients:</div><div class="line">            Estimate Std. Error t value Pr(&gt;|t|)    </div><div class="line">(Intercept) <span class="number">57.28555</span>   <span class="number">20.96132</span>   <span class="number">2.733</span>  <span class="number">0.00687</span> ** </div><div class="line">sizemedium   <span class="number">2.80050</span>    <span class="number">3.40190</span>   <span class="number">0.823</span>  <span class="number">0.41141</span>    </div><div class="line">sizesmall   <span class="number">10.40636</span>    <span class="number">3.82243</span>   <span class="number">2.722</span>  <span class="number">0.00708</span> ** </div><div class="line">mxPH        -<span class="number">3.97076</span>    <span class="number">2.48204</span>  -<span class="number">1.600</span>  <span class="number">0.11130</span>    </div><div class="line">Cl          -<span class="number">0.05227</span>    <span class="number">0.03165</span>  -<span class="number">1.651</span>  <span class="number">0.10028</span>    </div><div class="line">NO3         -<span class="number">0.89529</span>    <span class="number">0.35148</span>  -<span class="number">2.547</span>  <span class="number">0.01165</span> *  </div><div class="line">PO4         -<span class="number">0.05911</span>    <span class="number">0.01117</span>  -<span class="number">5.291</span> <span class="number">3.32</span>e-<span class="number">07</span> ***</div><div class="line">---</div><div class="line">Signif. codes:  <span class="number">0</span> ?**?<span class="number">0.001</span> ?*?<span class="number">0.01</span> ??<span class="number">0.05</span> ??<span class="number">0.1</span> ??<span class="number">1</span></div><div class="line"></div><div class="line">Residual standard error: <span class="number">17.5</span> on <span class="number">191</span> degrees of freedom</div><div class="line">Multiple R-squared:  <span class="number">0.3527</span>,	Adjusted R-squared:  <span class="number">0.3324</span> </div><div class="line">F-statistic: <span class="number">17.35</span> on <span class="number">6</span> and <span class="number">191</span> DF,  p-value: <span class="number">5.554</span>e-<span class="number">16</span></div></pre></td></tr></table></figure>

<ul>
<li>这个模型所解释的方差比例(R^2)仍然不是很可观，这样的R^2表明对海藻案例应用假定的线性模型是不合适的。</li>
</ul>
<h3 id="回归树">回归树</h3>
<hr>
<ul>
<li>本节给出R中的另一种回归模型。即本节描述了如何通过建立回归树来预测海藻a1出现的频率。由于这类模型能够处理缺失值，所以这里只需要如前面所述移除62号和199号水样。</li>
<li>建立回归树模型如下：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">library(rpart)</div><div class="line">data(algae)</div><div class="line">algae = algae[-manyNAs(algae),]</div><div class="line">rt.a1 = rpart(a1~., data = algae[,<span class="number">1</span>:<span class="number">12</span>])</div></pre></td></tr></table></figure>

<ul>
<li>对象rt.a1的内容如下：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">rt.a1</div><div class="line">n= <span class="number">198</span> </div><div class="line"></div><div class="line">node), split, n, deviance, yval</div><div class="line">      * denotes terminal node</div><div class="line"></div><div class="line"> <span class="number">1</span>) root <span class="number">198</span> <span class="number">90401.290</span> <span class="number">16.996460</span>  </div><div class="line">   <span class="number">2</span>) PO4&gt;=<span class="number">43.818</span> <span class="number">147</span> <span class="number">31279.120</span>  <span class="number">8.979592</span>  </div><div class="line">     <span class="number">4</span>) Cl&gt;=<span class="number">7.8065</span> <span class="number">140</span> <span class="number">21622.830</span>  <span class="number">7.492857</span>  </div><div class="line">       <span class="number">8</span>) oPO4&gt;=<span class="number">51.118</span> <span class="number">84</span>  <span class="number">3441.149</span>  <span class="number">3.846429</span> *</div><div class="line">       <span class="number">9</span>) oPO4&lt; <span class="number">51.118</span> <span class="number">56</span> <span class="number">15389.430</span> <span class="number">12.962500</span>  </div><div class="line">        <span class="number">18</span>) mnO2&gt;=<span class="number">10.05</span> <span class="number">24</span>  <span class="number">1248.673</span>  <span class="number">6.716667</span> *</div><div class="line">        <span class="number">19</span>) mnO2&lt; <span class="number">10.05</span> <span class="number">32</span> <span class="number">12502.320</span> <span class="number">17.646880</span>  </div><div class="line">          <span class="number">38</span>) NO3&gt;=<span class="number">3.1875</span> <span class="number">9</span>   <span class="number">257.080</span>  <span class="number">7.866667</span> *</div><div class="line">          <span class="number">39</span>) NO3&lt; <span class="number">3.1875</span> <span class="number">23</span> <span class="number">11047.500</span> <span class="number">21.473910</span>  </div><div class="line">            <span class="number">78</span>) mnO2&lt; <span class="number">8</span> <span class="number">13</span>  <span class="number">2919.549</span> <span class="number">13.807690</span> *</div><div class="line">            <span class="number">79</span>) mnO2&gt;=<span class="number">8</span> <span class="number">10</span>  <span class="number">6370.704</span> <span class="number">31.440000</span> *</div><div class="line">     <span class="number">5</span>) Cl&lt; <span class="number">7.8065</span> <span class="number">7</span>  <span class="number">3157.769</span> <span class="number">38.714290</span> *</div><div class="line">   <span class="number">3</span>) PO4&lt; <span class="number">43.818</span> <span class="number">51</span> <span class="number">22442.760</span> <span class="number">40.103920</span>  </div><div class="line">     <span class="number">6</span>) mxPH&lt; <span class="number">7.87</span> <span class="number">28</span> <span class="number">11452.770</span> <span class="number">33.450000</span>  </div><div class="line">      <span class="number">12</span>) mxPH&gt;=<span class="number">7.045</span> <span class="number">18</span>  <span class="number">5146.169</span> <span class="number">26.394440</span> *</div><div class="line">      <span class="number">13</span>) mxPH&lt; <span class="number">7.045</span> <span class="number">10</span>  <span class="number">3797.645</span> <span class="number">46.150000</span> *</div><div class="line">     <span class="number">7</span>) mxPH&gt;=<span class="number">7.87</span> <span class="number">23</span>  <span class="number">8241.110</span> <span class="number">48.204350</span>  </div><div class="line">      <span class="number">14</span>) PO4&gt;=<span class="number">15.177</span> <span class="number">12</span>  <span class="number">3047.517</span> <span class="number">38.183330</span> *</div><div class="line">      <span class="number">15</span>) PO4&lt; <span class="number">15.177</span> <span class="number">11</span>  <span class="number">2673.945</span> <span class="number">59.136360</span> *</div></pre></td></tr></table></figure>

<ul>
<li>回归树是对某些解释变量分层次的逻辑测试。基于树的模型自动筛选某些相关的变量，这样就会对树进行剪枝，减去某些变量。树从R标为1的根结点开始读，R在这个结点中提供相关的信息。即，可以再该结点中看到一共有198个水样（用于构建树的训练集数据样本量），在这198个水样中，海藻a1出现的平均频率为16.99，相对平均值的偏差为90401.29。树的每个结点有两个分支，这与预测变量的检验结果有关。例如，在根结点中有一个相应于测试“PO4&gt;=43.818”为真（含有147个水样）的个案分支（R输出中标为2），同时也有另一个分支包含剩余的51个不满足这个测试的水样（R标记为3）。从结点2有两个分支分布连接到结点4和结点5，具体到哪个结点由对变量CI的检验来确定。不断进行以上的检验，直到达到某一个叶结点，这些叶结点在R中由星号标记出来。那么我们只要从根结点开始根据对该水样的检验结果，追踪某个分支，直到叶结点，我们就可以预测某个水样的频率。叶结点目标变量的平均值就是树的预测值。</li>
<li>我们也可以得到回归树的图形表示。可以用函数plot()和函数text()对树对象绘图即可。这两个函数有多个参数来控制树的可视化。为了方便地得到漂亮的树的可视化图形，本书的R添加包中提供了函数prettyTree()。对上面得到的树对象应用该函数，得到图形如图所示：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">prettyTree(rt.a1)</div></pre></td></tr></table></figure>

<ul>
<li><img src="/img/DMwR/02_algae_model/04_plot.PNG" alt=""></li>
<li>函数summary()也可以用于树对象。此函数将给出许多有关于树的测试信息、其他可能考虑的测试以及中间分割等。这里的中间分割是R回归树处理缺失值的一种方法。</li>
<li>通常分两步来建立回归树。最初，生成一棵较大的树，然后通过统计估计删除底部的一些结点来对树进行修剪。这个过程的目的是繁殖过度拟合。事实上，一个过度大的树一般会很好地对训练数据集数据进行拟合，但是它会拟合给定数据集中的一写虚假的关系，因此当把该模型用于新数据的预测时，预测性能很差。在许多建模技术中存在过度拟合问题，尤其是当需要逼近的函数的假设条件不是很严格的时候。对于要求不严格的模型，虽然它们的要求不高，有广泛的应用范围，但却存在过度拟合问题，所以它需要一个事后统计估计步骤来避免过度拟合问题。</li>
<li><p>上面使用rpart()函数构建树，在构建树的过程中，当给定条件满足时构建过程就停止。当下列条件满足时，树就构建结束：</p>
<ul>
<li><ol>
<li>偏差的减少小于某一个给定的界限值时；</li>
</ol>
</li>
<li><ol>
<li>当结点中的样本数量小于某个给定界限值时；</li>
</ol>
</li>
<li><ol>
<li>当树的深度大于一个给定的界限值。</li>
</ol>
</li>
</ul>
</li>
<li><p>上面3个界限值分别由rpart()函数的三个参数（cp, minsplit, maxdepth）来确定。它们的默认值分别为0.01、20和30。如果要避免树的过度拟合问题，就要经常检查这些默认值的有效性。这可以通过对得到的树采取事后修剪过程来进行。</p>
</li>
<li>rpart()添加包实现了一种称为“复杂度损失修剪”的修剪方法（Breiman et al., 1984）。这个方法使用R在每个树结点计算的参数值cp。这种修剪方法试图估计cp值以确保达到预测的准确性和树的大小之间的最佳折中。给出一个由函数rpart()建立的回归树，R可以生成这棵树的一些子树，并估计这些树的性能。这些信息可以通过函数printcp()得到：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">printcp(rt.a1)</div><div class="line"></div><div class="line">Regression tree:</div><div class="line">rpart(formula = a1 ~ ., data = algae[, <span class="number">1</span>:<span class="number">12</span>])</div><div class="line"></div><div class="line">Variables actually used <span class="keyword">in</span> tree construction:</div><div class="line">[<span class="number">1</span>] Cl   mnO2 mxPH NO3  oPO4 PO4 </div><div class="line"></div><div class="line">Root node error: <span class="number">90401</span>/<span class="number">198</span> = <span class="number">456.57</span></div><div class="line"></div><div class="line">n= <span class="number">198</span> </div><div class="line"></div><div class="line">        CP nsplit rel error  xerror    xstd</div><div class="line"><span class="number">1</span> <span class="number">0.405740</span>      <span class="number">0</span>   <span class="number">1.00000</span> <span class="number">1.00909</span> <span class="number">0.13028</span></div><div class="line"><span class="number">2</span> <span class="number">0.071885</span>      <span class="number">1</span>   <span class="number">0.59426</span> <span class="number">0.72655</span> <span class="number">0.11938</span></div><div class="line"><span class="number">3</span> <span class="number">0.030887</span>      <span class="number">2</span>   <span class="number">0.52237</span> <span class="number">0.67966</span> <span class="number">0.11487</span></div><div class="line"><span class="number">4</span> <span class="number">0.030408</span>      <span class="number">3</span>   <span class="number">0.49149</span> <span class="number">0.70176</span> <span class="number">0.11781</span></div><div class="line"><span class="number">5</span> <span class="number">0.027872</span>      <span class="number">4</span>   <span class="number">0.46108</span> <span class="number">0.69623</span> <span class="number">0.11628</span></div><div class="line"><span class="number">6</span> <span class="number">0.027754</span>      <span class="number">5</span>   <span class="number">0.43321</span> <span class="number">0.69623</span> <span class="number">0.11628</span></div><div class="line"><span class="number">7</span> <span class="number">0.018124</span>      <span class="number">6</span>   <span class="number">0.40545</span> <span class="number">0.67679</span> <span class="number">0.11052</span></div><div class="line"><span class="number">8</span> <span class="number">0.016344</span>      <span class="number">7</span>   <span class="number">0.38733</span> <span class="number">0.70123</span> <span class="number">0.11415</span></div><div class="line"><span class="number">9</span> <span class="number">0.010000</span>      <span class="number">9</span>   <span class="number">0.35464</span> <span class="number">0.71140</span> <span class="number">0.11389</span></div></pre></td></tr></table></figure>

<ul>
<li>由rpart()函数建立的回归树是上面列表中的最后一个树（树9）。这个树的cp值为0.01（参数cp的默认值），该树包括九个测试和一个相对误差值（与根结点相比）0.354。然而，R应用10折交叉验证的内部过程，评估该树的平均相对误差为0.70241 ± 0.11523。根据这些更稳健的性能估计信息，可以避免过度拟合问题。可以看到，8号树的预测相对误差（0.67733）最小。另一个选择标准时根据1-SE规则来选择最好的回归树，这包括检查交叉验证的估计误差（“xerror”列），以及标准误差（“xstd”列）。在这个案例中，1-SE规则树是最小的树，误差小于0.67733 + 0.10892 = 0.78625，而由1检验的2号树的估计误差为0.73358。如果我们选择这个树而不是R建议的树，我们就可以通过使用不同的cp值来建立这棵树。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">rt2.a1 &lt;- prune(rt.a1, cp = <span class="number">0.08</span>)</div><div class="line">rt2.a1</div><div class="line"></div><div class="line">n= <span class="number">198</span> </div><div class="line"></div><div class="line">node), split, n, deviance, yval</div><div class="line">      * denotes terminal node</div><div class="line"></div><div class="line"><span class="number">1</span>) root <span class="number">198</span> <span class="number">90401.29</span> <span class="number">16.996460</span>  </div><div class="line">  <span class="number">2</span>) PO4&gt;=<span class="number">43.818</span> <span class="number">147</span> <span class="number">31279.12</span>  <span class="number">8.979592</span> *</div><div class="line">  <span class="number">3</span>) PO4&lt; <span class="number">43.818</span> <span class="number">51</span> <span class="number">22442.76</span> <span class="number">40.103920</span> *</div></pre></td></tr></table></figure>

<ul>
<li>本书添加包中的rpartXse()函数可以自动运行这个过程，它的参数se的默认值为1.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(rt.a1 &lt;- rpartXse(a1~., data=algae[,<span class="number">1</span>:<span class="number">12</span>]))</div><div class="line"></div><div class="line">n= <span class="number">198</span> </div><div class="line"></div><div class="line">node), split, n, deviance, yval</div><div class="line">      * denotes terminal node</div><div class="line"></div><div class="line"><span class="number">1</span>) root <span class="number">198</span> <span class="number">90401.290</span> <span class="number">16.996460</span>  </div><div class="line">  <span class="number">2</span>) PO4&gt;=<span class="number">43.818</span> <span class="number">147</span> <span class="number">31279.120</span>  <span class="number">8.979592</span>  </div><div class="line">    <span class="number">4</span>) Cl&gt;=<span class="number">7.1665</span> <span class="number">142</span> <span class="number">21763.160</span>  <span class="number">7.530282</span> *</div><div class="line">    <span class="number">5</span>) Cl&lt; <span class="number">7.1665</span> <span class="number">5</span>   <span class="number">746.792</span> <span class="number">50.140000</span> *</div><div class="line">  <span class="number">3</span>) PO4&lt; <span class="number">43.818</span> <span class="number">51</span> <span class="number">22442.760</span> <span class="number">40.103920</span> *</div></pre></td></tr></table></figure>

<ul>
<li>可以应用R的函数snip.rpart()来交互地对树进行修剪。这个函数可以通过两种方式生成一个修剪过的回归树。第一种方法是指出需要修剪那个地方的结点号（可以通过输出树对象来得到树的结点号）：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">first.tree &lt;- rpart(a1~., data =algae[,<span class="number">1</span>:<span class="number">12</span>])</div><div class="line">snip.rpart(first.tree, c(<span class="number">4</span>,<span class="number">7</span>))</div><div class="line"></div><div class="line">n= <span class="number">198</span> </div><div class="line"></div><div class="line">node), split, n, deviance, yval</div><div class="line">      * denotes terminal node</div><div class="line"></div><div class="line"> <span class="number">1</span>) root <span class="number">198</span> <span class="number">90401.290</span> <span class="number">16.996460</span>  </div><div class="line">   <span class="number">2</span>) PO4&gt;=<span class="number">43.818</span> <span class="number">147</span> <span class="number">31279.120</span>  <span class="number">8.979592</span>  </div><div class="line">     <span class="number">4</span>) Cl&gt;=<span class="number">7.8065</span> <span class="number">140</span> <span class="number">21622.830</span>  <span class="number">7.492857</span> *</div><div class="line">     <span class="number">5</span>) Cl&lt; <span class="number">7.8065</span> <span class="number">7</span>  <span class="number">3157.769</span> <span class="number">38.714290</span> *</div><div class="line">   <span class="number">3</span>) PO4&lt; <span class="number">43.818</span> <span class="number">51</span> <span class="number">22442.760</span> <span class="number">40.103920</span>  </div><div class="line">     <span class="number">6</span>) mxPH&lt; <span class="number">7.87</span> <span class="number">28</span> <span class="number">11452.770</span> <span class="number">33.450000</span>  </div><div class="line">      <span class="number">12</span>) mxPH&gt;=<span class="number">7.045</span> <span class="number">18</span>  <span class="number">5146.169</span> <span class="number">26.394440</span> *</div><div class="line">      <span class="number">13</span>) mxPH&lt; <span class="number">7.045</span> <span class="number">10</span>  <span class="number">3797.645</span> <span class="number">46.150000</span> *</div><div class="line">     <span class="number">7</span>) mxPH&gt;=<span class="number">7.87</span> <span class="number">23</span>  <span class="number">8241.110</span> <span class="number">48.204350</span> *</div></pre></td></tr></table></figure>

<ul>
<li>这个函数与rpart()函数一样返回一个数对象，所以可以用形如my.tree &lt;- snip.rpart(first.tree, c(4,7))这样的代码来保存这个修剪过的树。</li>
<li>另外，也可以再图形窗口下使用snip.rpart()函数。首先，画出回归树，然后调用没有第二个参数的函数。如果点击回归树的某些结点，R会在控制台输出这些结点的信息。如果继续点击这个结点，R就在这个结点对树进行修剪。可以在图形窗口继续修剪回归树，直到右击结束这一交互式的修剪过程。调用该函数的结果仍然是一个数对象：</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">prettyTree(first.tree)</div><div class="line">snip.rpart(first.tree)</div><div class="line"></div><div class="line">node number: <span class="number">2</span>  n= <span class="number">147</span> </div><div class="line">    response= <span class="number">8.979592</span></div><div class="line">    Error (dev) =  <span class="number">31279.12</span> </div><div class="line">node number: <span class="number">6</span>  n= <span class="number">28</span> </div><div class="line">    response= <span class="number">33.45</span></div><div class="line">    Error (dev) =  <span class="number">11452.77</span> </div><div class="line">n= <span class="number">198</span> </div><div class="line"></div><div class="line">node), split, n, deviance, yval</div><div class="line">      * denotes terminal node</div><div class="line"></div><div class="line"> <span class="number">1</span>) root <span class="number">198</span> <span class="number">90401.290</span> <span class="number">16.996460</span>  </div><div class="line">   <span class="number">2</span>) PO4&gt;=<span class="number">43.818</span> <span class="number">147</span> <span class="number">31279.120</span>  <span class="number">8.979592</span>  </div><div class="line">     <span class="number">4</span>) Cl&gt;=<span class="number">7.8065</span> <span class="number">140</span> <span class="number">21622.830</span>  <span class="number">7.492857</span>  </div><div class="line">       <span class="number">8</span>) oPO4&gt;=<span class="number">51.118</span> <span class="number">84</span>  <span class="number">3441.149</span>  <span class="number">3.846429</span> *</div><div class="line">       <span class="number">9</span>) oPO4&lt; <span class="number">51.118</span> <span class="number">56</span> <span class="number">15389.430</span> <span class="number">12.962500</span>  </div><div class="line">        <span class="number">18</span>) mnO2&gt;=<span class="number">10.05</span> <span class="number">24</span>  <span class="number">1248.673</span>  <span class="number">6.716667</span> *</div><div class="line">        <span class="number">19</span>) mnO2&lt; <span class="number">10.05</span> <span class="number">32</span> <span class="number">12502.320</span> <span class="number">17.646880</span>  </div><div class="line">          <span class="number">38</span>) NO3&gt;=<span class="number">3.1875</span> <span class="number">9</span>   <span class="number">257.080</span>  <span class="number">7.866667</span> *</div><div class="line">          <span class="number">39</span>) NO3&lt; <span class="number">3.1875</span> <span class="number">23</span> <span class="number">11047.500</span> <span class="number">21.473910</span>  </div><div class="line">            <span class="number">78</span>) mnO2&lt; <span class="number">8</span> <span class="number">13</span>  <span class="number">2919.549</span> <span class="number">13.807690</span> *</div><div class="line">            <span class="number">79</span>) mnO2&gt;=<span class="number">8</span> <span class="number">10</span>  <span class="number">6370.704</span> <span class="number">31.440000</span> *</div><div class="line">     <span class="number">5</span>) Cl&lt; <span class="number">7.8065</span> <span class="number">7</span>  <span class="number">3157.769</span> <span class="number">38.714290</span> *</div><div class="line">   <span class="number">3</span>) PO4&lt; <span class="number">43.818</span> <span class="number">51</span> <span class="number">22442.760</span> <span class="number">40.103920</span>  </div><div class="line">     <span class="number">6</span>) mxPH&lt; <span class="number">7.87</span> <span class="number">28</span> <span class="number">11452.770</span> <span class="number">33.450000</span>  </div><div class="line">      <span class="number">12</span>) mxPH&gt;=<span class="number">7.045</span> <span class="number">18</span>  <span class="number">5146.169</span> <span class="number">26.394440</span> *</div><div class="line">      <span class="number">13</span>) mxPH&lt; <span class="number">7.045</span> <span class="number">10</span>  <span class="number">3797.645</span> <span class="number">46.150000</span> *</div><div class="line">     <span class="number">7</span>) mxPH&gt;=<span class="number">7.87</span> <span class="number">23</span>  <span class="number">8241.110</span> <span class="number">48.204350</span>  </div><div class="line">      <span class="number">14</span>) PO4&gt;=<span class="number">15.177</span> <span class="number">12</span>  <span class="number">3047.517</span> <span class="number">38.183330</span> *</div><div class="line">      <span class="number">15</span>) PO4&lt; <span class="number">15.177</span> <span class="number">11</span>  <span class="number">2673.945</span> <span class="number">59.136360</span> *</div></pre></td></tr></table></figure>

<ul>
<li>在上例中，点击并修剪了节点2和结点6.</li>
</ul>
<h2 id="后记">后记</h2>
<ul>
<li>这一节我们建立了模型，用了2种方法，分别是多元回归和回归树。那么下一节就要对我们建立的模型进行评价了。</li>
</ul>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/数据挖掘与R语言-案例学习/">数据挖掘与R语言-案例学习</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/数据挖掘/">数据挖掘</a>
  </div>

</div>


<div class="article-share" id="share">

<div class="share-jiathis">
  
<div class="jiathis_style_24x24">
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_googleplus"></a>
	<a class="jiathis_button_douban"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
    var jiathis_config={
    data_track_clickback:true,
    sm:"copy,renren,cqq",
    pic:"",
    summary:"",
     ralateuid:{"tsina":"2155417625"},hideMore:false}
    
  </script> 
<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=
" charset="utf-8"></script>      

 </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/10/30/数据挖掘课堂算法总结_Junior/" title="数据挖掘课堂算法总结_Junior">
  <strong>上一篇：</strong><br/>
  <span>
  数据挖掘课堂算法总结_Junior</span>
</a>
</div>


<div class="next">
<a href="/2014/10/28/DMwR-note-01-预测海藻数量(四)/"  title="DMwR-note-01-预测海藻数量(四)">
 <strong>下一篇：</strong><br/> 
 <span>DMwR-note-01-预测海藻数量(四)
</span>
</a>
</div>

</nav>

	
<section class="comment">
	<div class="ds-thread"></div>
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"tim4chan"};
		(function() {
			var ds = document.createElement('script');
			ds.type = 'text/javascript';ds.async = true;
			ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
			ds.charset = 'UTF-8';
			(document.getElementsByTagName('head')[0] 
			 || document.getElementsByTagName('body')[0]).appendChild(ds);
		})();
		</script>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#写在开头的话"><span class="toc-number">1.</span> <span class="toc-text">写在开头的话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据的模型"><span class="toc-number">2.</span> <span class="toc-text">数据的模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多元化线性回归"><span class="toc-number">2.1.</span> <span class="toc-text">多元化线性回归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#回归树"><span class="toc-number">2.2.</span> <span class="toc-text">回归树</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#后记"><span class="toc-number">3.</span> <span class="toc-text">后记</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
			<li><a href="/categories/Django/" title="Django">Django<sup>1</sup></a></li>
		
			<li><a href="/categories/JSP-Review/" title="JSP_Review">JSP_Review<sup>10</sup></a></li>
		
			<li><a href="/categories/R-Tutorial/" title="R Tutorial">R Tutorial<sup>4</sup></a></li>
		
			<li><a href="/categories/probability-theory-basic-conception/" title="probability-theory-basic-conception">probability-theory-basic-conception<sup>1</sup></a></li>
		
			<li><a href="/categories/医学图像处理/" title="医学图像处理">医学图像处理<sup>2</sup></a></li>
		
			<li><a href="/categories/原型设计/" title="原型设计">原型设计<sup>1</sup></a></li>
		
			<li><a href="/categories/备忘/" title="备忘">备忘<sup>1</sup></a></li>
		
			<li><a href="/categories/技术开发/" title="技术开发">技术开发<sup>1</sup></a></li>
		
			<li><a href="/categories/数据挖掘与R语言-案例学习/" title="数据挖掘与R语言-案例学习">数据挖掘与R语言-案例学习<sup>4</sup></a></li>
		
			<li><a href="/categories/数据挖掘算法总结/" title="数据挖掘算法总结">数据挖掘算法总结<sup>3</sup></a></li>
		
			<li><a href="/categories/机器学习/" title="机器学习">机器学习<sup>2</sup></a></li>
		
			<li><a href="/categories/概率论笔记/" title="概率论笔记">概率论笔记<sup>2</sup></a></li>
		
			<li><a href="/categories/毕业设计系列/" title="毕业设计系列">毕业设计系列<sup>8</sup></a></li>
		
			<li><a href="/categories/毕设系列/" title="毕设系列">毕设系列<sup>1</sup></a></li>
		
			<li><a href="/categories/面试分享/" title="面试分享">面试分享<sup>2</sup></a></li>
		
			<li><a href="/categories/黑马程序员/" title="黑马程序员">黑马程序员<sup>2</sup></a></li>
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			<li><a href="/tags/JSP-网页开发/" title="JSP 网页开发">JSP 网页开发<sup>10</sup></a></li>
		
			<li><a href="/tags/数据挖掘/" title="数据挖掘">数据挖掘<sup>5</sup></a></li>
		
			<li><a href="/tags/R-basics/" title="R basics">R basics<sup>4</sup></a></li>
		
			<li><a href="/tags/SVM入门/" title="SVM入门">SVM入门<sup>2</sup></a></li>
		
			<li><a href="/tags/概率论/" title="概率论">概率论<sup>2</sup></a></li>
		
			<li><a href="/tags/机器学习入门基础/" title="机器学习入门基础">机器学习入门基础<sup>1</sup></a></li>
		
			<li><a href="/tags/最小二乘法-论文翻译/" title="最小二乘法 论文翻译">最小二乘法 论文翻译<sup>1</sup></a></li>
		
			<li><a href="/tags/最小二乘法/" title="最小二乘法">最小二乘法<sup>1</sup></a></li>
		
			<li><a href="/tags/FP-growth-tree/" title="FP-growth-tree">FP-growth-tree<sup>1</sup></a></li>
		
			<li><a href="/tags/Aprior-Algorithm/" title="Aprior Algorithm">Aprior Algorithm<sup>1</sup></a></li>
		
			<li><a href="/tags/手写数字-SVM/" title="手写数字 SVM">手写数字 SVM<sup>1</sup></a></li>
		
			<li><a href="/tags/手写数字识别-Kernel-Support-Vector-Machine/" title="手写数字识别 Kernel Support Vector Machine">手写数字识别 Kernel Support Vector Machine<sup>1</sup></a></li>
		
			<li><a href="/tags/感知机/" title="感知机">感知机<sup>1</sup></a></li>
		
			<li><a href="/tags/Django-Models/" title="Django-Models">Django-Models<sup>1</sup></a></li>
		
			<li><a href="/tags/二值化/" title="二值化">二值化<sup>1</sup></a></li>
		
			<li><a href="/tags/机器学习基础/" title="机器学习基础">机器学习基础<sup>1</sup></a></li>
		
			<li><a href="/tags/梯度下降法/" title="梯度下降法">梯度下降法<sup>1</sup></a></li>
		
			<li><a href="/tags/概率论基本概念/" title="概率论基本概念">概率论基本概念<sup>1</sup></a></li>
		
			<li><a href="/tags/原型设计/" title="原型设计">原型设计<sup>1</sup></a></li>
		
			<li><a href="/tags/有价值的博客记录/" title="有价值的博客记录">有价值的博客记录<sup>1</sup></a></li>
		
		</ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Aprior-Algorithm/" style="font-size: 10.00px;">Aprior Algorithm</a><a href="/tags/Django-Models/" style="font-size: 10.00px;">Django-Models</a><a href="/tags/FP-growth-tree/" style="font-size: 10.00px;">FP-growth-tree</a><a href="/tags/JSP-网页开发/" style="font-size: 20.00px;">JSP 网页开发</a><a href="/tags/R-basics/" style="font-size: 15.00px;">R basics</a><a href="/tags/SVM/" style="font-size: 10.00px;">SVM</a><a href="/tags/SVM入门/" style="font-size: 12.50px;">SVM入门</a><a href="/tags/linux-C/" style="font-size: 10.00px;">linux C</a><a href="/tags/二值化/" style="font-size: 10.00px;">二值化</a><a href="/tags/单例设计模式/" style="font-size: 10.00px;">单例设计模式</a><a href="/tags/原型设计/" style="font-size: 10.00px;">原型设计</a><a href="/tags/多线程/" style="font-size: 10.00px;">多线程</a><a href="/tags/字符串操作/" style="font-size: 10.00px;">字符串操作</a><a href="/tags/感知机/" style="font-size: 10.00px;">感知机</a><a href="/tags/手写数字-SVM/" style="font-size: 10.00px;">手写数字 SVM</a><a href="/tags/手写数字识别-Kernel-Support-Vector-Machine/" style="font-size: 10.00px;">手写数字识别 Kernel Support Vector Machine</a><a href="/tags/数据挖掘/" style="font-size: 17.50px;">数据挖掘</a><a href="/tags/最小二乘法/" style="font-size: 10.00px;">最小二乘法</a><a href="/tags/最小二乘法-论文翻译/" style="font-size: 10.00px;">最小二乘法 论文翻译</a><a href="/tags/有价值的博客记录/" style="font-size: 10.00px;">有价值的博客记录</a><a href="/tags/机器学习入门基础/" style="font-size: 10.00px;">机器学习入门基础</a><a href="/tags/机器学习基础/" style="font-size: 10.00px;">机器学习基础</a><a href="/tags/梯度下降法/" style="font-size: 10.00px;">梯度下降法</a><a href="/tags/概率论/" style="font-size: 12.50px;">概率论</a><a href="/tags/概率论基本概念/" style="font-size: 10.00px;">概率论基本概念</a><a href="/tags/正则表达式/" style="font-size: 10.00px;">正则表达式</a><a href="/tags/灰度直方图/" style="font-size: 10.00px;">灰度直方图</a><a href="/tags/面试算法/" style="font-size: 10.00px;">面试算法</a>
    </div>
  </div>


  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
<iframe width="100%" height="300" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=300&fansRow=2&ptype=1&speed=300&skin=1&isTitle=1&noborder=1&isWeibo=1&isFans=0&uid=2155417625&verifier=9f994c23&dpc=1"></iframe>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
	  <li><a href="http://zjdian.com/" target="_blank" title="zjdian">中继点</li>
      <li><a href="http://ripeconan.com/" target="_blank" title="ripeconan">Ripeconan</a></li>
      <li><a href="http://hexo.io" target="_blank" title="Hexo">Hexo</a></li>
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, I&#39;m Tim Chan. <br/>
			Welcome to my personal blog.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2155417625" target="_blank" class="icon-weibo" title="weibo"></a>
		
		
		<a href="https://github.com/chenyuqing" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		<a href="https://www.douban.com/people/motoleiusre" target="_blank" class="icon-douban" title="豆瓣"></a>
		
		
		
		<a href="mailto:motoleisure@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Pacman">Jacman</a> © 2015 
		
		<a href="http://tim4chan.com/about" target="_blank" title="Tim Chan">Tim Chan</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>




<script type="text/javascript">
  var duoshuoQuery = {short_name:"乐果404"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>





<div id="totop">
<a title="Back to Top"><img src="/img/scrollup.png"/></a>
</div>

<script src="/js/totop.js"></script>




  </body>
</html>


<a href="https://github.com/chenyuqing/chenyuqing.github.io"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png"></a>